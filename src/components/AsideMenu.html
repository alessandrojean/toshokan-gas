<script type="text/x-template" id="aside-menu-template">
  <aside class="menu">
    <template v-for="item in items">
      <p class="menu-label" :key="item.key + '-label'">
        {{ item.title }}
      </p>
      <ul class="menu-list" :key="item.key + '-list'">
        <li v-for="subitem in item.subitems" :key="subitem.key">
          <a
            :class="{ 'is-active': active === subitem.key }"
            @click="handleItemClick(subitem.key)"
          >
            {{ subitem.title }}
          </a>
        </li>
      </ul>
    </template>
  </aside>
</script>

<script id="aside-menu-script">
  Vue.component('AsideMenu', {
    template: '#aside-menu-template',
    name: 'AsideMenu',
    data: function () {
      return { active: this.items[0].subitems[0].key }
    },
    props: {
      items: {
        type: Array,
        required: true
      }
    },
    methods: {
      handleItemClick: function (key) {
        this.active = key
        this.$emit('active', key)
      }
    }
  })
</script>